{% extends "base.html" %} {# BARIS INI PENTING! Ini menghubungkan ke base.html #}

{% block title %}Manajemen Dataset{% endblock %}

{% block content %}
<div class="bg-dark-700 p-8 rounded-lg shadow-lg"> {# Mengubah bg-white ke bg-dark-700 #}
    <h1 class="text-3xl font-bold text-blue-500 mb-6">Manajemen Dataset</h1> {# Mengubah text-blue-700 ke text-blue-500 #}
    <div class="flex space-x-4 mb-6">
        <a href="{{ url_for('add_dataset') }}" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
            Tambah Data Baru
        </a>
        <a href="{{ url_for('import_csv') }}" class="inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
            Impor dari CSV
        </a>
        {# Tombol Hapus Semua Data dengan konfirmasi #}
        <form action="{{ url_for('delete_all_dataset') }}" method="POST" onsubmit="return confirm('Apakah Anda yakin ingin menghapus SEMUA data dataset? Tindakan ini tidak dapat dibatalkan.');">
            <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                Hapus Semua Data
            </button>
        </form>
    </div>

    {% if dataset %}
    <div class="overflow-x-auto rounded-lg shadow-md border border-gray-700"> {# Tambahkan border untuk kontainer tabel #}
        <table class="min-w-full bg-dark-800 text-gray-300"> {# Mengubah bg-white ke bg-dark-800 dan text-gray-700 ke text-gray-300 #}
            <thead class="bg-dark-900 text-gray-100"> {# Mengubah bg-gray-200 ke bg-dark-900 dan text-gray-700 ke text-gray-100 #}
                <tr>
                    <th class="py-3 px-4 text-left">ID</th>
                    <th class="py-3 px-4 text-left">Jenis Bencana</th>
                    <th class="py-3 px-4 text-left">Kecamatan</th>
                    <th class="py-3 px-4 text-left">Desa</th>
                    <th class="py-3 px-4 text-left">Nama KK</th>
                    <th class="py-3 px-4 text-left">Jumlah Anggota Keluarga</th>
                    <th class="py-3 px-4 text-left">Status Kepemilikan Rumah</th>
                    <th class="py-3 px-4 text-left">Kondisi Atap</th>
                    <th class="py-3 px-4 text-left">Kondisi Kolom/Balok</th>
                    <th class="py-3 px-4 text-left">Kondisi Plesteran</th>
                    <th class="py-3 px-4 text-left">Kondisi Lantai</th>
                    <th class="py-3 px-4 text-left">Kondisi Pintu/Jendela</th>
                    <th class="py-3 px-4 text-left">Kondisi Instalasi Listrik</th>
                    <th class="py-3 px-4 text-left">Kondisi Struktur Bangunan</th>
                    <th class="py-3 px-4 text-left">Relokasi</th>
                    <th class="py-3 px-4 text-left">Aksi</th>
                </tr>
            </thead>
            <tbody>
                {% for data in dataset %}
                <tr class="border-b border-gray-700 hover:bg-dark-700"> {# Mengubah border-gray-200 ke border-gray-700 dan hover:bg-gray-50 ke hover:bg-dark-700 #}
                    <td class="py-3 px-4">{{ data.id }}</td>
                    <td class="py-3 px-4">{{ data.jenis_bencana }}</td>
                    <td class="py-3 px-4">{{ data.kecamatan }}</td>
                    <td class="py-3 px-4">{{ data.desa }}</td>
                    <td class="py-3 px-4">{{ data.nama_kk }}</td>
                    <td class="py-3 px-4">{{ data.jumlah_anggota_keluarga }}</td>
                    <td class="py-3 px-4">{{ data.status_kepemilikan_rumah }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_atap }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_kolom_balok }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_plesteran }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_lantai }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_pintu_jendela }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_instalasi_listrik }}</td>
                    <td class="py-3 px-4">{{ data.kondisi_struktur_bangunan }}</td>
                    <td class="py-3 px-4">{{ data.relokasi }}</td>
                    <td class="py-3 px-4 flex items-center space-x-4"> {# Tambahkan items-center di sini dan ubah space-x-2 ke space-x-4 #}
                        <a href="{{ url_for('edit_dataset', id=data.id) }}" class="text-blue-500 hover:text-blue-400 font-medium">Edit</a> {# Ubah kelas tombol Edit #}
                        <form action="{{ url_for('delete_dataset', id=data.id) }}" method="POST" onsubmit="return confirm('Apakah Anda yakin ingin menghapus data ini?');">
                            <button type="submit" class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-bold py-1 px-3 rounded-md text-sm transition-colors shadow">Hapus</button> {# Ubah kelas tombol Hapus #}
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="text-gray-400">Belum ada data di dataset. Silakan tambah atau impor.</p> {# Mengubah text-gray-600 ke text-gray-400 #}
    {% endif %}
</div>
{% endblock %}
